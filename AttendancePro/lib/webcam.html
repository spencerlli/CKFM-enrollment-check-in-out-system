<!doctype html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
</head>
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.3.1/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@16.3.1/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/babel-transform-in-browser@6.4.6/dist/btib.min.js"></script>
  <script src="react-webcam.js"></script>
  <script type="text/es2015">

    class App extends React.Component {
      constructor(props) {
        super(props);
      }

      render() {
        const videoConstraints = {
          aspectRatio: 0.7,
          facingMode: "user"
        };

        return (
          <Webcam
            videoConstraints={videoConstraints}
          >

            {({ getScreenshot }) => (
              <button
                onClick={() => {
                  const screenshot = getScreenshot()

                  window.parent.postMessage(
                    {
                      type: 'amis:snap',
                      data: {
                        img: screenshot
                      }
                    },
                    '*'
                  );
                }}
              >
                Capture photo
              </button>
            )}
          </Webcam>
        );
      }
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>